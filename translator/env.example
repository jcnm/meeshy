# Configuration du service de traduction Meeshy
# Copiez ce fichier vers .env et ajustez les valeurs selon votre environnement

# =============================================================================
# CONFIGURATION GÉNÉRALE
# =============================================================================
DEBUG=false
LOG_LEVEL=info
WORKERS=4

# =============================================================================
# CONFIGURATION DES PORTS
# =============================================================================
# Ports pour les différents services
GRPC_HOST=0.0.0.0
GRPC_PORT=50051
HTTP_PORT=8000
FASTAPI_PORT=8000

# Configuration ZMQ avec deux ports distincts
ZMQ_PUSH_PORT=5555    # Port PULL pour recevoir les commandes de traduction
ZMQ_SUB_PORT=5558     # Port PUB pour publier les résultats de traduction

# =============================================================================
# CONFIGURATION BASE DE DONNÉES
# =============================================================================
DATABASE_URL=file:../shared/dev.db
PRISMA_POOL_SIZE=15

# =============================================================================
# CONFIGURATION REDIS (CACHE)
# =============================================================================
REDIS_URL=redis://localhost:6379
TRANSLATION_CACHE_TTL=3600
CACHE_MAX_ENTRIES=10000

# =============================================================================
# CONFIGURATION MACHINE LEARNING
# =============================================================================
# Modèles de traduction NLLB (No Language Left Behind)
BASIC_MODEL=t5-small
MEDIUM_MODEL=nllb-200-distilled-600M
PREMIUM_MODEL=nllb-200-distilled-1.3B

# Configuration des performances ML
DEVICE=cpu
ML_BATCH_SIZE=32
GPU_MEMORY_FRACTION=0.8

# Configuration des langues
SUPPORTED_LANGUAGES=fr,en,es,de,pt,zh,ja,ar
DEFAULT_LANGUAGE=fr
AUTO_DETECT_LANGUAGE=true

# =============================================================================
# CONFIGURATION DES PERFORMANCES
# =============================================================================
# Timeouts et limites
TRANSLATION_TIMEOUT=30
MAX_TEXT_LENGTH=5000
CONCURRENT_TRANSLATIONS=10

# Configuration des workers
TRANSLATION_WORKERS=10

# Configuration des pools ZMQ
NORMAL_POOL_SIZE=10000
ANY_POOL_SIZE=10000
NORMAL_WORKERS=3
ANY_WORKERS=2

# =============================================================================
# CONFIGURATION DES MODÈLES
# =============================================================================
# Gestion des modèles
AUTO_CLEANUP_CORRUPTED_MODELS=true
FORCE_MODEL_REDOWNLOAD=false

# =============================================================================
# CONFIGURATION DES CHEMINS
# =============================================================================
# Chemins pour les modèles et cache
MODELS_PATH=models
CACHE_DIR=cache
LOG_DIR=logs

# =============================================================================
# CONFIGURATION PYTHON
# =============================================================================
PYTHONPATH=/app
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1
PIP_NO_CACHE_DIR=1

# =============================================================================
# CONFIGURATION DES MODÈLES HUGGING FACE
# =============================================================================
TORCH_HOME=/app/models
HF_HOME=/app/models
MODEL_CACHE_DIR=/app/models
