server {
    listen 80;
    listen [::]:80;
    server_name static.meeshy.me;
    
    # Désactiver les logs d'accès pour les performances
    access_log off;
    error_log /var/log/nginx/static-error.log warn;
    
    # Configuration des fichiers statiques
    root /usr/share/nginx/html;
    
    # Servir tous les fichiers statiques (avatars, images)
    location / {
        # Pas de traitement, juste servir les fichiers
        try_files $uri =404;
        
        # Headers de cache pour les images
        expires 1y;
        add_header Cache-Control "public, immutable";
        add_header X-Served-By "Nginx-Static";
        add_header Access-Control-Allow-Origin "https://meeshy.me";
        add_header Access-Control-Allow-Methods "GET, HEAD, OPTIONS";
        
        # Types MIME
        types {
            image/jpeg jpg jpeg;
            image/png png;
            image/webp webp;
            image/gif gif;
            image/svg+xml svg;
        }
        
        # Pas de listing des répertoires
        autoindex off;
    }
    
    # Healthcheck
    location /health {
        access_log off;
        return 200 "OK\n";
        add_header Content-Type text/plain;
    }
}
