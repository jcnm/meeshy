# ===== MEESHY PRODUCTION CONFIGURATION =====
# Configuration de production générée automatiquement
# Date de génération: Tue Sep  9 20:24:25 CEST 2025
# 
# Ce fichier contient la configuration de production
# Les secrets sont dans le fichier séparé: secrets/production-secrets.env

# ===== DEPLOYMENT ENVIRONMENT =====
NODE_ENV=production
DEBUG=false
LOG_LEVEL=info
DEPLOYMENT_ENV=digitalocean
DEPLOYMENT_REGION=nyc3

# ===== DOMAIN CONFIGURATION =====
DOMAIN=meeshy.me
CERTBOT_EMAIL=admin@meeshy.me

# ===== DATABASE CONFIGURATION =====
DATABASE_TYPE=MONGODB
DATABASE_URL="mongodb://meeshy-database:27017/meeshy?replicaSet=rs0"
MONGODB_DATABASE=meeshy
MONGODB_USER=meeshy
MONGODB_PORT=27017

# ===== REDIS CONFIGURATION =====
REDIS_URL=redis://redis:6379
REDIS_PORT=6379

# ===== SERVICE PORTS =====
GATEWAY_PORT=3000
PORT=3000
TRANSLATOR_HTTP_PORT=8000
TRANSLATOR_GRPC_PORT=50051
FASTAPI_PORT=8000
GRPC_PORT=50051
FRONTEND_PORT=3100
HTTP_PORT=80
HTTPS_PORT=443

# ===== ZMQ CONFIGURATION =====
ZMQ_PORT=5555
ZMQ_TRANSLATOR_HOST=translator
ZMQ_TRANSLATOR_PUSH_PORT=5555
ZMQ_TRANSLATOR_SUB_PORT=5558
ZMQ_TRANSLATOR_PULL_PORT=5555
ZMQ_TRANSLATOR_PUB_PORT=5558
ZMQ_TIMEOUT=10000

# ===== TRANSLATION CONFIGURATION =====
SUPPORTED_LANGUAGES=fr,en,es,de,pt,zh,ja,ar
DEFAULT_LANGUAGE=fr
AUTO_DETECT_LANGUAGE=true
TRANSLATION_TIMEOUT=60
MAX_TEXT_LENGTH=5000
CONCURRENT_TRANSLATIONS=10
TRANSLATION_WORKERS=20

# ===== ML MODEL CONFIGURATION =====
BASIC_MODEL=Helsinki-NLP/opus-mt-en-fr
MEDIUM_MODEL=facebook/nllb-200-distilled-600M
PREMIUM_MODEL=facebook/nllb-200-distilled-600M
DEVICE=cpu
ML_BATCH_SIZE=8
GPU_MEMORY_FRACTION=0.8
QUANTIZATION_LEVEL=float16

# ===== MODEL MANAGEMENT =====
MODELS_PATH=/workspace/models
TORCH_HOME=/workspace/models
HF_HOME=/workspace/models
MODEL_CACHE_DIR=/workspace/models
AUTO_CLEANUP_CORRUPTED_MODELS=true
FORCE_MODEL_REDOWNLOAD=false
MODEL_DOWNLOAD_MAX_RETRIES=5
MODEL_DOWNLOAD_TIMEOUT=600
MODEL_DOWNLOAD_CONSECUTIVE_TIMEOUTS=5

# ===== WEBSOCKET CONFIGURATION =====
WS_MAX_CONNECTIONS=50000
WS_PING_INTERVAL=30000
WS_PING_TIMEOUT=10000

# ===== CORS CONFIGURATION =====
FRONTEND_URL=https://meeshy.me
CORS_ORIGINS=https://meeshy.me,https://www.meeshy.me,https://gate.meeshy.me,https://ml.meeshy.me,https://traefik.meeshy.me,https://mongo.meeshy.me,https://redis.meeshy.me
CORS_ORIGIN=${CORS_ORIGINS}
ALLOWED_ORIGINS=https://meeshy.me,https://www.meeshy.me,https://gate.meeshy.me,https://ml.meeshy.me,https://traefik.meeshy.me,https://mongo.meeshy.me,https://redis.meeshy.me

# ===== RATE LIMITING =====
RATE_LIMIT_MAX=5000
RATE_LIMIT_WINDOW=60000

# ===== FRONTEND CONFIGURATION =====
NEXT_PUBLIC_API_URL=https://gate.meeshy.me
NEXT_PUBLIC_WS_URL=wss://gate.meeshy.me
NEXT_PUBLIC_BACKEND_URL=https://gate.meeshy.me
NEXT_PUBLIC_TRANSLATION_URL=https://ml.meeshy.me
TRANSLATOR_URL=http://translator:8000
NEXT_PUBLIC_FRONTEND_URL=https://meeshy.me

# ===== NEXT.JS CONFIGURATION =====
NEXT_TELEMETRY_DISABLED=1
NEXT_PUBLIC_DISABLE_CLIENT_TRANSLATION=true
NEXT_PUBLIC_USE_API_TRANSLATION_ONLY=true
NEXT_PUBLIC_DEBUG_LOGS=false

# ===== INTERNAL URLs =====
INTERNAL_BACKEND_URL=http://gateway:3000
INTERNAL_WS_URL=ws://gateway:3000

# ===== DOCKER CONFIGURATION =====
DOCKER_BUILDKIT=1
DOCKER_DEFAULT_PLATFORM=linux/amd64
TRANSLATOR_IMAGE=isopen/meeshy-translator:latest
GATEWAY_IMAGE=isopen/meeshy-gateway:latest
FRONTEND_IMAGE=isopen/meeshy-frontend:latest

# ===== PERFORMANCE OPTIMIZATION =====
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:256
OMP_NUM_THREADS=8
MKL_NUM_THREADS=8
NUMEXPR_NUM_THREADS=8
PYTHONUNBUFFERED=1

# ===== WORKER CONFIGURATION =====
WORKERS=8
NORMAL_WORKERS=4
ANY_WORKERS=2
NORMAL_WORKERS_DEFAULT=20
ANY_WORKERS_DEFAULT=8
NORMAL_WORKERS_MIN=4
ANY_WORKERS_MIN=2
NORMAL_WORKERS_MAX=100
ANY_WORKERS_MAX=50
NORMAL_WORKERS_SCALING_MAX=100
ANY_WORKERS_SCALING_MAX=50

# ===== MONITORING =====
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# ===== SECURITY =====
HELMET_ENABLED=true
CONTENT_SECURITY_POLICY=true
SECURITY_HEADERS_ENABLED=true
CONTENT_SECURITY_POLICY_STRICT=true
HSTS_ENABLED=true
XSS_PROTECTION_ENABLED=true

# ===== LOGGING =====
LOG_FORMAT=json
LOG_FILE=/var/log/meeshy/meeshy.log
LOG_MAX_SIZE=100m
LOG_MAX_FILES=10
LOG_LEVEL_DEBUG=false
LOG_LEVEL_INFO=true
LOG_LEVEL_WARN=true
LOG_LEVEL_ERROR=true

# ===== BACKUP & RECOVERY =====
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_COMPRESSION=true
BACKUP_ENCRYPTION=true

# ===== NETWORKING =====
ENABLE_HTTPS=true
PROXY_ENABLED=true

# ===== OPTIMIZATION =====
ENABLE_COMPRESSION=true
ENABLE_MINIFICATION=true
ENABLE_CDN_CACHE=true
CACHE_INVALIDATION_ENABLED=true

# ===== SCALING =====
AUTO_SCALE_ENABLED=true
AUTO_SCALE_MIN_INSTANCES=2
AUTO_SCALE_MAX_INSTANCES=20
AUTO_SCALE_CPU_THRESHOLD=70

# ===== CLOUD PROVIDER =====
CLOUD_PROVIDER=digitalocean
DIGITALOCEAN_REGION=nyc3
DIGITALOCEAN_SIZE=s-4vcpu-8gb

# ===== MONITORING & ALERTS =====
MONITORING_ENABLED=true
METRICS_ENABLED=true
METRICS_PORT=9090
PROMETHEUS_ENABLED=true
ALERTS_ENABLED=true
ALERT_THRESHOLD_CPU=80
ALERT_THRESHOLD_MEMORY=85
ALERT_THRESHOLD_DISK=90

# ===== SSL/TLS =====
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# ===== FEATURE FLAGS =====
FEATURE_NEW_UI=true
FEATURE_ADVANCED_TRANSLATION=true
FEATURE_VIDEO_CHAT=false
FEATURE_VOICE_MESSAGES=false

# ===== COMPLIANCE =====
GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=365
ENABLE_AUDIT_LOGS=true
ENABLE_DATA_ENCRYPTION=true

# ===== INTEGRATION =====
ENABLE_API_RATE_LIMITING=true
API_RATE_LIMIT=10000

# ===== PERFORMANCE MONITORING =====
PERFORMANCE_MONITORING_ENABLED=true
PERFORMANCE_THRESHOLD_RESPONSE_TIME=2000
PERFORMANCE_THRESHOLD_MEMORY_USAGE=80
PERFORMANCE_THRESHOLD_CPU_USAGE=70

# ===== RELIABILITY =====
CIRCUIT_BREAKER_ENABLED=true
RETRY_MECHANISM_ENABLED=true
FALLBACK_MECHANISM_ENABLED=true

# ===== PRISMA CONFIGURATION =====
PRISMA_SCHEMA_PATH=
PRISMA_POOL_SIZE=50
PRISMA_QUERY_ENGINE_LIBRARY=
PRISMA_CLIENT_ENGINE_TYPE=library
PRISMA_DISABLE_WARNINGS=true

# ===== DEVELOPMENT =====
ENABLE_DEBUG_MODE=false
ENABLE_PROFILING=false
ENABLE_DEBUG_TOOLS=false

# ===== VERSION =====
DEPLOYMENT_VERSION=1.0.0-production

# ===== CONTACT =====
SUPPORT_EMAIL=support@meeshy.me
FEEDBACK_EMAIL=feedback@meeshy.me

# ===== BRAND =====
BRAND_NAME=Meeshy
BRAND_COLOR=#3B82F6

# ===== CACHE CONFIGURATION =====
TRANSLATION_CACHE_TTL=3600
CACHE_MAX_ENTRIES=50000
